{% extends 'base.html.twig' %}

{% block title %}Panneau d'administration FAQ{% endblock %}

{% block body %}
        {# ======================== Sidebar ========================== #}        
        <sidebar class="bg-cyan-950 fixed left-0 top-0 h-screen rounded-tr-3xl">

            <div class="flex flex-col items-center w-[22vw] gap-3">

                <a href="{{ path('app_home') }}">
                    <img src="{{ asset('images/Recette_lakaz_logo.png') }}" alt="Logo" class="w-[12vw] mt-8">
                <a>

                <div class="w-[30%] mx-auto h-[5px] bg-slate-100 rounded-xl"></div>

                <div class="flex flex-col items-center gap-3 font-semibold text-[1.75vh] md:text-[2.5vh] lg:text-[3vh]">

                    {% if is_granted('ROLE_ADMIN') %}
                        <a href="{{ path('app_categorie_index') }}" class="text-slate-50 text-center hover:bg-blue-800 mb-5 px-2 py-1 w-full">Gestion catégorie</a>
                        <a href="{{ path('app_user_index') }}" class="text-slate-50 text-center hover:bg-blue-800 mb-5 px-2 py-1 w-full">Gestion utilisateurs</a>
                    {% endif %}


                    <p class="reset text-slate-50 text-center hover:bg-blue-800 mb-5 px-2 py-1 w-full">Tous</p>

                    {% for categorie in data %}
                        <p data-categorie="{{ categorie }}" class="category text-slate-50 text-center hover:bg-blue-800 mb-5 px-2 py-1 w-full">{{ categorie }}</p>
                    {% endfor %}
                </div>
            </div>


        </sidebar>

         {# ==================== Content ======================= #}
        <content>
            {# ============ Header ============= #}
            <div class="ml-[17vw] bg-sky-200 min-h-screen">

                <div class="flex flex-col justify-center shadow-md items-center">

                    <div class="flex justify-between items-center w-full px-4">
                    
                        <p class="text-xl p-2">Connecté en tant que : <span class="text-green-500 uppercase">{{ app.user.username }}<span></p>

                        <a href="{{ path('app_logout') }}"  class="flex flex-col text-center transition-all hover:scale-105 p-6">
                            <i class="fa-solid fa-right-to-bracket text-slate-800 text-3xl text-center font-semibold"></i>
                        </a>
                    </div>

                    <form action="#" method="get" class="p-4 flex w-full justify-between">

                        <input type="text" id="search" name="search" value="{{ searchTerm }}" class="w-[80%] text-slate-900 p-4 text-xl font-semibold rounded-lg border border-slate-900" placeholder="Rechercher  ...">
                        <button type="submit" class="text-slate-800 text-center px-4 py-1 font-semibold text-2xl transition-all hover:scale-110"><i class="fa-solid fa-magnifying-glass"></i></button>
                    </form>
                </div>       

                {# ============== contenu ============= #}
                <div class="flex flex-col p-2 mt-4 justify-center items-center">

                    <a href="{{ path('app_recette_new') }}"  class="text-slate-50 text-xl text-center bg-green-600 mb-5 px-4 py-3 font-bold rounded-lg w-[90%] md:w-[70%] lg:w-[60%]">Nouvelle recette</a>
                        
                    <table class="table mx-auto shadow-xl text-lg w-11/12">

                        <thead>

                            <tr class="bg-slate-800 text-slate-100 border-2 border-slate-900 uppercase">

                                {# <th>Catégorie</th> #}
                                <th>Nom</th>
                                <th>actions</th>
                            </tr>
                        </thead>

                        <tbody class="bg-green-500">

                        {% for categorie in data %}
                            {% for recette in categorie.recettes %}

                            <tr class="container border-2 border-slate-900 objet" data-categorie={{ categorie }}>

                                {# <td class="p-2 bg-slate-50 text-slate-900 text-center border-2 border-slate-900 uppercase font-extrabold">{{ recette.categorie }}</td> #}
                                <td class="p-2 bg-slate-50 text-slate-900 text-center border-2 border-slate-900 uppercase font-extrabold">{{ recette.label | raw }}</td>
                                <td class="bg-slate-800 p-2 text-center w-10">
                                    <a href="{{ path('app_recette_show', {'id': recette.id}) }}" class="bg-blue-700  text-center px-3  hover:brightness-125 rounded-lg font-semibold text-slate-50">Voir</a>
                                    <a href="{{ path('app_recette_edit', {'id': recette.id}) }}" class="bg-blue-700 text-center px-3  hover:brightness-125 rounded-lg font-semibold text-slate-50">Modifier</a>
                                    <form method="post" action="{{ path('app_recette_delete', {'id': recette.id}) }}" onsubmit="return confirm('Voulez vous vraiment supprimer cette recette ?');">
                                        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ recette.id) }}">
                                        <button class="btn text-red-700  text-center px-3  hover:brightness-125 rounded-lg font-semibold">Supprimer</button>
                                    </form>
                                </td>
                            </tr>
                            {% endfor %}
                        {% else %}

                            <tr>

                                <td colspan="5" class="text-slate-100 p-3">Aucune demande ne correspond à votre recherche...</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </content>
    </div>

{% endblock %}